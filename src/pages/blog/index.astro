---
import { getCollection } from 'astro:content';
import PageLayout from '../../layouts/PageLayout.astro';

const posts = (await getCollection('blog', ({ data }) => !data.draft))
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<PageLayout title="Blog" description="Updates and articles from Bloomwood Solutions.">
  <h1>Blog</h1>
  {posts.length === 0 ? (
    <p>No posts yet.</p>
  ) : (
    <ul>
      {posts.map((p) => (
        <li><a href={`/blog/${p.slug}/`}>{p.data.title}</a></li>
      ))}
    </ul>
  )}
</PageLayout>
